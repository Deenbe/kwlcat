<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- SEO -->
  <title>Observability</title>
  <meta name="description" content="Observability">

  <!-- URL CANONICAL -->
  <!-- <link rel="canonical" href="http://your-url.com/"> -->

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext"
    rel="stylesheet">

  <!-- CSS WebSlides -->
  <link rel="stylesheet" type='text/css' media='all' href="static/css/webslides.css">

  <!-- Optional - CSS SVG Icons (Font Awesome) -->
  <link rel="stylesheet" type='text/css' media='all' href="static/css/svg-icons.css">

  <!-- SOCIAL CARDS (ADD YOUR INFO) -->

  <!-- FACEBOOK -->
  <meta property="og:url" content="http://your-url.com/"> <!-- YOUR URL -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="WebSlides — Making HTML Presentations Easy"> <!-- EDIT -->
  <meta property="og:description"
    content="WebSlides is about telling stories beautifully. Just the essential features. Good karma."> <!-- EDIT -->
  <meta property="og:updated_time" content="2017-01-04T17:20:50"> <!-- EDIT -->
  <meta property="og:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

  <!-- TWITTER -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@webslides"> <!-- EDIT -->
  <meta name="twitter:creator" content="@jlantunez"> <!-- EDIT -->
  <meta name="twitter:title" content="WebSlides — Making HTML Presentations Easy"> <!-- EDIT -->
  <meta name="twitter:description"
    content="WebSlides is about good karma. Just essential features. 120+ free slides ready to use."> <!-- EDIT -->
  <meta name="twitter:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

  <!-- FAVICONS -->
  <link rel="shortcut icon" sizes="16x16" href="static/images/favicons/favicon.png">
  <link rel="shortcut icon" sizes="32x32" href="static/images/favicons/favicon-32.png">
  <link rel="apple-touch-icon icon" sizes="76x76" href="static/images/favicons/favicon-76.png">
  <link rel="apple-touch-icon icon" sizes="120x120" href="static/images/favicons/favicon-120.png">
  <link rel="apple-touch-icon icon" sizes="152x152" href="static/images/favicons/favicon-152.png">
  <link rel="apple-touch-icon icon" sizes="180x180" href="static/images/favicons/favicon-180.png">
  <link rel="apple-touch-icon icon" sizes="192x192" href="static/images/favicons/favicon-192.png">

  <!-- Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#333333">

</head>

<body>
  <header role="banner">
    <nav role="navigation">
      <p class="logo"><a href="index.html" title="WebSlides">WebSlides</a></p>
      <ul>
        <li class="github">
          <a rel="external" href="https://github.com/webslides/webslides" title="Github">
            <svg class="fa-github">
              <use xlink:href="#fa-github"></use>
            </svg>
            <em>WebSlides</em>
          </a>
        </li>
        <li class="twitter">
          <a rel="external" href="https://twitter.com/webslides" title="Twitter">
            <svg class="fa-twitter">
              <use xlink:href="#fa-twitter"></use>
            </svg>
            <em>@WebSlides</em>
          </a>
        </li>
        <!--  <li class="dribbble"><a rel="external" href="http://dribbble.com/webslides" title="Dribbble"><svg class="fa-dribbble"><use xlink:href="#fa-dribbble"></use></svg> <em>webslides</em></a></li> -->
      </ul>
    </nav>
  </header>

  <main role="main">
    <article id="webslides" class="vertical">
      <!-- Quick Guide
          - Each parent <section> in the <article id="webslides"> element is an individual slide.
          - Vertical sliding = <article id="webslides" class="vertical">
          - <div class="wrap"> = container 90% / <div class="wrap size-50"> = 45%;
        -->

      <section>
        <span class="background"
          style="opacity: 20%; background-image:url('https://images.unsplash.com/photo-1463310127152-33b375103141?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1653&q=80')"></span>
        <!--.wrap = container (width: 90%) -->
        <div class="wrap aligncenter">
          <h1><strong>əb-​ˌzər-​və-​ˈbi-​lə-​tē</strong></h1>
          <p class="text-intro"></p>
        </div>
        <!-- .end .wrap -->
      </section>

      <section>
        <!--.wrap = container (width: 90%) -->
        <div class="wrap size-50 aligncenter">
          <h2><strong>Agenda</strong></h2>
          <div class="bg-white shadow">
            <ul class="flexblock reasons">
              <li>
                <h2>What is observability?</h2>
                <p class="text-intro">Brief introduction to set the scene</p>
              </li>
              <li>
                <h2>Current state</h2>
                <p class="text-intro">Analysis of the problem space, current solutions and why we are here today</p>
              </li>
              <li>
                <h2>Open Telemetry Deep Dive</h2>
                <p class="text-intro">Concepts and what it looks like in practice</p>
              </li>
              <li>
                <h2>Where to go from here</h2>
                <p class="text-intro">Quick recap of topics we discussed and general guidance</p>
              </li>
            </ul>
          </div>
          <!-- .end .bg-white shadow -->
        </div>
        <!-- .end .wrap -->
      </section>

      <section>
        <span class="background"
          style="opacity: 10%; background-image:url('https://images.unsplash.com/photo-1573453313814-4ba03a96b966?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1651&q=80')"></span>
        <div class="wrap aligncenter">
          <h2>Observability</h2>
          <p>Our ability to monitor all components of a system are operating within acceptable parameters</p>
        </div>
      </section>

      <section>
        <div class="wrap">
          <h2>How?</h2>
          <div class="grid vertical-align">
            <div class="column">
              <h3>Instrument</h3>
              <p class="text-intro">Augment application code to emit interesting events</p>
              <p>
              <pre>
log.Printf("brrr\n")
                  </pre>
              </p>
            </div>
            <div class="column">
              <h3>Collect</h3>
              <p class="text-intro">Gather interesting events from various processes</p>
              <p>
              <pre>
tail -f /var/log/pets
                  </pre>
              </p>
            </div>
            <div class="column">
              <h3>Analyse</h3>
              <p class="text-intro">Understand the operating conditions</p>
              <p>
              <pre>
grep -e '^brrr$'
                  </pre>
              </p>
            </div>
            <div class="column">
              </p>
            </div>
          </div>
        </div>
      </section>

      <section>
        <div class="wrap">
          <h3>Current state of observability</h3>
          <div class="grid vertical-align">
            <div class="column">
              <p>
                Today we capture three kinds of observability data. <strong>Logs</strong>
                tell us what's happening inside a system. <strong>Metrics</strong> give us
                the measurements from instruments and software. <strong>Traces</strong>
                show us the trail of code execution.
              </p>
              <p>
                In early days these records were captured as text messages.
                They were hard to analyse, required great regex skills.
              <pre>log.Printf("too many failed logins, sending a verification sms for user %d", userID)</pre>
              </p>
              <p>
                Structured logging took us a step forward towards sanity.
              <pre>
log.WithFields(
  log.Fields {
    "event": "SEND_SMS"
    "reason": "TOO_MANY_FAILED_LOGINS", 
    "userId": userID,
  }).Info("sms validation initiated")
                </pre>
              </p>
              <p>
                However, observing processes that are completed by the coordination of
                multiple distributed applications still requires a lot of forethought.
                We need the ability to correlate and contextualize a series of events taking
                place in disparate applications.
              </p>
            </div>
            <div class="column">
              <figure>
                <img src="static/images/cloudformation_log.png" />
              </figure>
            </div>
          </div>
        </div>
      </section>
      <section>
        <div class="wrap">
          <h3>Open Telemetry</h3>
          <p>
            OpenTelemetry is a collection of tools, APIs, and SDKs.
            You can use it to instrument, generate, collect, and export telemetry data (metrics, logs, and traces)
            for analysis in order to understand your software's performance and behavior.
          </p>
          <div class="grid align-vertical">
            <div class="column">
              <h5>Proto</h5>
              <p>Language independent interface types. Defined per data source for instrumentation libraries and the
                collector as well as for common aspects and resources. Proto files are extensively commented. </p>
            </div>
            <div class="column">
              <h5>Specification</h5>
              <p>
                Describes the cross-language requirements and expectations for all implementations. Beyond definition of
                terms, the specification defines the following:
                <strong>API</strong>: Used to generate telemetry data. Defined per data source as well as for other
                aspects including
                baggage and propagators.
                <strong>SDK</strong>: Implementation of the API with processing and exporting capabilities. Defined per
                data source as
                well as for other aspects including resources and configuration.
                <strong>Data</strong>: Defines semantic conventions to provide vendor-agnostic implementations as well
                as the
                OpenTelemetry protocol (OTLP).
              </p>
            </div>
            <div class="column">
              <h5>Instrumentation Libraries</h5>
              <p>
                The inspiration of the OpenTelemetry project is to make every library and application observable out of
                the box by having them call the OpenTelemetry API directly. Until that happens, there is a need for a
                separate library which can inject this information. A library that enables observability for another
                library is called an instrumentation library. The OpenTelemetry project provides an instrumentation
                library for multiple languages. All instrumentation libraries support manual (code modified)
                instrumentation and several support automatic (byte-code) instrumentation.
              </p>
            </div>
            <div class="column">
              <h5>Collector</h5>
              <p>
                The OpenTelemetry Collector offers a vendor-agnostic implementation on how to receive, process, and
                export telemetry data. It removes the need to run, operate, and maintain multiple agents/collectors in
                order to support open-source observability data formats (e.g. Jaeger, Prometheus, etc.) sending to one
                or more open-source or commercial back-ends. The Collector is the default location instrumentation
                libraries export their telemetry data.
              </p>
            </div>
          </div>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Reference Architecture</h3>
          <figure>
            <img src="static/images/otel_reference_arch.png" />
          </figure>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Anatomy of a Trace</h3>
          <p>A <strong>span</strong> is the building block of a trace and is a named, timed operation that
            represents a piece of the
            workflow in the distributed system. Multiple spans are pieced together to create a
            <strong>trace</strong>.
          </p>
          <figure>
            <img src="static/images/spans2.webp" />
          </figure>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Sample Application</h3>
          <p>In this example, client accesses a NameGen service using an http client. NameGen service uses IDGen
            service to generate a unique id for each name it generates. Unique ids are generated with the aid of
            DynamoDB.</p>
          <figure>
            <img src="static/images/sample_archtecture.png" />
          </figure>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Sample Application Zoomed</h3>
          <figure>
            <img style="width: 75%;height: 75%;" src="static/images/sample_architecture_zoomed.png" />
          </figure>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Setting up tracing stack</h3>
          <pre>
func initialiseXrayTrace(name string) func() {
	ctx := context.Background()
	endpoint := os.Getenv("OTEL_EXPORTER_OTLP_ENDPOINT")
	if endpoint == "" {
		endpoint = "0.0.0.0:55680"
	}

	driver := otlpgrpc.NewDriver(otlpgrpc.WithInsecure(), otlpgrpc.WithEndpoint(endpoint))

	exporter, err := otlp.NewExporter(ctx, driver)
	if err != nil {
		log.Fatal("failed to initialise xtray exporter: %v", err)
	}

	bsp := trace.NewBatchSpanProcessor(exporter)
	idg := xray.NewIDGenerator()

	tp := trace.NewTracerProvider(
		trace.WithSpanProcessor(bsp),
		trace.WithIDGenerator(idg),
	)

	otel.SetTracerProvider(tp)
	otel.SetTextMapPropagator(xray.Propagator{})
	
}

              </pre>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Instrumentation - Record Operations with Spans</h3>
          <p>
            Instrument critical pieces of code with spans.
          </p>
          <pre>
func (g *MonotonicIDGenerator) ensureScopeExists(ctx context.Context, scope string) error {
  <span class="code-comment">
	ctx, put := g.tracer.Start(ctx, "MonotoinicIDGenerator.ensureScopeExists")
	defer put.End()
  </span>
	_, err := g.client.PutItem(
		ctx,
		&dynamodb.PutItemInput{
			TableName: aws.String(g.tableName),
			Item: map[string]types.AttributeValue{
				"scope_id": &types.AttributeValueMemberS{Value: scope},
				"value":    &types.AttributeValueMemberN{Value: "0"},
			},
			ConditionExpression: aws.String("attribute_not_exists(scope_id)"),
			ReturnValues:        types.ReturnValueNone,
		})

	if err != nil {
		var apiErr smithy.APIError
		if errors.As(err, &apiErr) {
			if apiErr.ErrorCode() != "ConditionalCheckFailedException" {
				return errors.WithStack(err)
			}
		}
	} else {
		put.AddEvent(fmt.Sprintf("new scope item created: %v", scope))
	}

	return nil
}

          </pre>
        </div>
      </section>
      <section>
        <div cass="wrap aligncenter">
          <h3>Instrumentation - Context Propagation</h3>
          <p>
            Facilitate context propagation.
          </p>
          <pre>
func NewMonotonicIDGenerator(tableName string, options ...Option) (*MonotonicIDGenerator, error) {
	g := &MonotonicIDGenerator{tableName: tableName}
  <span class="code-comment">
	config, err := config.LoadDefaultConfig(context.Background(), config.WithHTTPClient(&http.Client{
			Transport: otelhttp.NewTransport(http.DefaultTransport, otelhttp.WithTracerProvider(g.tp), otelhttp.WithSpanOptions(trace.WithAttributes(semconv.PeerServiceKey.String("dynamodb")))),
  }))
  </span>
  if err != nil {
    return nil, errors.WithStack(err)
  }
  g.config = &config
	g.client = dynamodb.NewFromConfig(*g.config)
	return g, nil
}

</pre>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Instrumentation</h3>
          <p>Instrumentation can be done either <strong>manually</strong> or <strong>automatically</strong>. Automatic
            instrumentation works by intercepting method calls to inject span
            <strong>Start</strong> and
            <strong>End</strong> methods.
          </p> <p>Automatic instrumentation is a great way to add observability to applications
          with minimum effort. In some programming environments (C, C++, Rust, Go), it's hard to achieve this than
          others.
          </p>
          <p>
            Sometimes you need to turn on and off instrumentation on demand. It's important to understand how this is
            archived by your tooling in order to ensure that it does not result in bad user experience.
          </p>
          <p>
            Consider sensitive information handled by applications being instrumented (oops!).
            <pre>
              SELECT * FROM users WHERE user_id='alice@wonderland.com' and pwd_hash='...'
            </pre>
          </p>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Results</h3>
          <p>
          <figure>
            <img src="static/images/xray.png" />
          </figure>
          </p>
        </div>
      </section>
      <section>
        <div class="wrap aligncenter">
          <h3>Next Steps</h3>
          <ul>
            <li>Metrics and Logs</li>
            <li>Integration with ECS/EKS</li>
            <li>...</li>
          </ul>
        </div>
      </section>
      <section class="slide-bottom">
        <div class="wrap">
          <div class="content-right text-serif">
            <h2>
              <strong>Thanks.</strong>
            </h2>
          </div>
          <!-- .end .content-right -->
        </div>
        <!-- .end .wrap -->
      </section>

    </article>
    <!-- end article -->
  </main>
  <!-- end main -->

  <!-- A global footer

     <footer role="contentinfo">
      <div class="wrap">
        <p>An <a href="https://github.com/webslides/webslides">open source solution</a>, by <a href="https://twitter.com/webslides">@webslides</a>.</p>
      </div>
    </footer>  -->

  <!-- Required -->
  <script src="static/js/webslides.js"></script>
  <script>
    window.ws = new WebSlides();
  </script>

  <!-- OPTIONAL - svg-icons.js (fontastic.me - Font Awesome as svg icons) -->
  <script defer src="static/js/svg-icons.js"></script>

</body>

</html>